<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>入口起点(entry point) | Webpack learning</title>
    <meta name="description" content="webpack学习指南">
    
    
    <link rel="preload" href="/Webpack-learning/assets/css/styles.5d786b44.css" as="style"><link rel="preload" href="/Webpack-learning/assets/js/app.5d786b44.js" as="script"><link rel="preload" href="/Webpack-learning/assets/js/6.72114b79.js" as="script"><link rel="prefetch" href="/Webpack-learning/assets/js/2.b5865242.js"><link rel="prefetch" href="/Webpack-learning/assets/css/1.styles.609f56ce.css"><link rel="prefetch" href="/Webpack-learning/assets/js/1.609f56ce.js"><link rel="prefetch" href="/Webpack-learning/assets/css/2.styles.b5865242.css"><link rel="prefetch" href="/Webpack-learning/assets/js/3.2782e44e.js"><link rel="prefetch" href="/Webpack-learning/assets/js/4.cb691a1a.js"><link rel="prefetch" href="/Webpack-learning/assets/js/5.073922cd.js"><link rel="prefetch" href="/Webpack-learning/assets/js/7.71b8e9df.js"><link rel="prefetch" href="/Webpack-learning/assets/js/8.13583045.js">
    <link rel="stylesheet" href="/Webpack-learning/assets/css/styles.5d786b44.css"><link rel="stylesheet" href="/Webpack-learning/assets/css/1.styles.609f56ce.css"><link rel="stylesheet" href="/Webpack-learning/assets/css/2.styles.b5865242.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Webpack-learning/" class="home-link router-link-active"><!----> <span class="site-name">Webpack learning</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Webpack-learning/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Webpack-learning/concepts/howInstall.html" class="nav-link">concepts(概念)</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Webpack-learning/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Webpack-learning/concepts/howInstall.html" class="nav-link">concepts(概念)</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Webpack-learning/concepts/howInstall.html" class="sidebar-link">安装</a></li><li><a href="/Webpack-learning/concepts/concept.html" class="sidebar-link">概念</a></li><li><a href="/Webpack-learning/concepts/entry.html" class="active sidebar-link">入口起点(entry point)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Webpack-learning/concepts/entry.html#前置基础工程目录" class="sidebar-link">前置基础工程目录</a></li><li class="sidebar-sub-header"><a href="/Webpack-learning/concepts/entry.html#单文件单入口-单页面打包方式" class="sidebar-link">单文件单入口,单页面打包方式</a></li><li class="sidebar-sub-header"><a href="/Webpack-learning/concepts/entry.html#多文件单入口-单页面打包方式" class="sidebar-link">多文件单入口,单页面打包方式</a></li><li class="sidebar-sub-header"><a href="/Webpack-learning/concepts/entry.html#多文件多入口-多页面打包方式" class="sidebar-link">多文件多入口,多页面打包方式</a></li><li class="sidebar-sub-header"><a href="/Webpack-learning/concepts/entry.html#多页面打包造成的问题" class="sidebar-link">多页面打包造成的问题</a></li></ul></li><li><a href="/Webpack-learning/concepts/configuration.html" class="sidebar-link">配置(configuration)</a></li><li><a href="/Webpack-learning/concepts/output.html" class="sidebar-link">输出(output)</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="入口起点-entry-point"><a href="#入口起点-entry-point" aria-hidden="true" class="header-anchor">#</a> 入口起点(entry point)</h1> <p>在上一章概念中已经对<code>entry</code>配置有了初步的认识,同时<code>entry</code>在<code>webpack</code>存在多种方式去进行配置,如果对上一章概念认识阅读的,提到过可以配置多入口方案。</p> <h2 id="前置基础工程目录"><a href="#前置基础工程目录" aria-hidden="true" class="header-anchor">#</a> 前置基础工程目录</h2> <div class="language- extra-class"><pre class="language-text"><code>.webpackProject
 |--src
 |   |---index.js
 |--webpack.config.js
</code></pre></div><h2 id="单文件单入口-单页面打包方式"><a href="#单文件单入口-单页面打包方式" aria-hidden="true" class="header-anchor">#</a> 单文件单入口,单页面打包方式</h2> <p>用法: <code>entry: string</code></p> <blockquote><p>简写语法</p></blockquote> <p>webpack.config.js</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
    entry: './src/index.js'
}
</code></pre></div><p>以上的写法是以下方法的简写方式</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
    entry: {
        main: './src/index.js'
    }
}
</code></pre></div><p>运行<code>webpack</code>在当前目录下生成<code>dist</code>目录,并且生成<code>main.js</code>文件</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>本节学习课程demo下载文件夹为<a href="https://github.com/494755899/Webpack-learning/tree/master/source" target="_blank" rel="noopener noreferrer">lesson5<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <h2 id="多文件单入口-单页面打包方式"><a href="#多文件单入口-单页面打包方式" aria-hidden="true" class="header-anchor">#</a> 多文件单入口,单页面打包方式</h2> <p>用法: <code>entry: Array(string)</code></p> <p>使用<code>entry</code>选项创建一个入口的时候,不但可以使用字符串的方式,而且还可以通过数组的方式写入不同的文件路径,如果你想把多个依赖文件注入在一起时，通过数组的方式就可以灵活运用</p> <div class="language- extra-class"><pre class="language-text"><code>webpackProject
 ├── src
-|   |── index.js
+|   ├── index1.js  写入 document.write('webpack learning 1')
+|   ├── index2.js  写入 document.write('webpack learning 2')
 |———webpack.config.js
</code></pre></div><p>如果想把<code>index1.js</code>的文件中的代码和<code>index2.js</code>中的代码同时打包到一个入口中,用数组方式定义<code>entry</code>再合适不过了</p> <p>webpack.config.js</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
    entry: ['./src/index1.js', './src/index2.js']
}
</code></pre></div><p>运行<code>webpack</code>命令。</p> <p>打包完成后在根目录下会生成<code>dist</code>目录,同时内部添加了一个<code>main.js</code>。<code>index1.js</code>和<code>index2.js</code>文件的执行代码会被顺序的打入。</p> <div class="language- extra-class"><pre class="language-text"><code>webpackProject
 |── dist
 |   |--index.html
 |   |--main.js 
 ├── src
 |   ├── index1.js  写入 document.write('webpack learning 1')
 |   ├── index2.js  写入 document.write('webpack learning 2')
 |-- webpack.config.js
</code></pre></div><p>在<code>dist</code>目录下创建<code>index.html</code>,写入基本的<code>html</code>结构。在底下通过<code>script</code>引下<code>main.js</code>文件</p> <p>在打包生成后的<code>dist</code>目录下创建<code>index.html</code></p> <div class="language- extra-class"><pre class="language-text"><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;/body&gt;
&lt;script src=&quot;./main.js&quot;&gt;&lt;/script&gt;
&lt;/html&gt;
</code></pre></div><p>在浏览打开<code>html</code>页面,可以发现在页面中写入了</p> <img src="/Webpack-learning/assets/img/1.17b74b23.png" alt="alt text" title="Title"> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>本节学习课程demo下载文件夹为<a href="https://github.com/494755899/Webpack-learning/tree/master/source" target="_blank" rel="noopener noreferrer">lesson6<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <p>通过图片可以证明通过数组的方把多个文件打入一个入口的时候，执行结果是从左到右打入的方式进行执行的。</p> <h2 id="多文件多入口-多页面打包方式"><a href="#多文件多入口-多页面打包方式" aria-hidden="true" class="header-anchor">#</a> 多文件多入口,多页面打包方式</h2> <p>用法： <code>entry: {[entryChunkName: string]: string|Array(string&gt;)</code></p> <div class="language- extra-class"><pre class="language-text"><code>webpackProject
 |── dist
 |   |--index1.html
 |   |--index2.html
 |   |--index1.js
 |   |--index2.js
 ├── src
 |   ├── index1.js  写入 document.write('webpack learning 1')
 |   ├── index2.js  写入 document.write('webpack learning 2')
 |-- webpack.config.js
</code></pre></div><p>可以通过对象的语法创建多个入口。</p> <p>webpack.config.js</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
    entry: {
        index1: './src/index.js',
        index2: './src/index2.js'
    }
}
</code></pre></div><p>运行<code>webpack</code>命令</p> <p>告诉<code>webpack</code>此时需要创建二个独立的模块(创建自己独立的依赖图)，分别需要引入到对应的<code>html</code>文件中,在<code>entry</code>中定义的属性则是最后打包生成后的包名。值则是对应路径文件中打包的代码。</p> <p>通过运行<code>webpack</code>,可以发现<code>dist</code>目录下生成了<code>index1.js</code>和<code>index2.js</code>,分别手动把这两个<code>js</code>引入到对应的<code>index1.html</code>和<code>index2.html</code>当中。打开页面发会生成对应的内容。</p> <p>这只是一个简单生成两个页面的对应入口，如果有更多的页面，则需要借且一些其它插件和依赖包。进行自动创建入口和自动插入到<code>html</code>当中。</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>本节学习课程demo下载文件夹为<a href="https://github.com/494755899/Webpack-learning/tree/master/source" target="_blank" rel="noopener noreferrer">lesson7<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <h2 id="多页面打包造成的问题"><a href="#多页面打包造成的问题" aria-hidden="true" class="header-anchor">#</a> 多页面打包造成的问题</h2> <div class="warning custom-block"><p class="custom-block-title">WARNING</p> <p>对于多入口的打包方式,必然会存在每个入口引用到同一个第三方包和公用函数。这种情况下每个入口都会打入同样的第三方的包和公用函数。可以利用<code>webpack4.x</code>的<code>optimization.splitChunks</code>在每个页面中创建共享代码,这样可以充分的利用缓存和减少代码的重复问题</p></div> <div class="language- extra-class"><pre class="language-text"><code>webpackProject
 |── dist
 |   |--index1.html
 |   |--index2.html
 |   |--index1.js
 |   |--index2.js
 ├── src
+|   ├── util.js
 |   ├── index1.js
 |   ├── index2.js
 |-- webpack.config.js
</code></pre></div><p>util.js</p> <div class="language- extra-class"><pre class="language-text"><code>export const a = 'webpack learning'
</code></pre></div><p>src/index1.js</p> <div class="language- extra-class"><pre class="language-text"><code>import { a } from './util.js
document.write(a)
document.write('file is index1')
</code></pre></div><p>src/index2.js</p> <div class="language- extra-class"><pre class="language-text"><code>import { a } from './util.js
document.write(a)
document.write('file is index2')
</code></pre></div><p>添加<code>mode</code>为<code>development</code>为了不让打包后的代码进行压缩，方便查看引入了那些代码</p> <p>webpack.config.js</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
   +mode: 'development', 
    entry: {
        index1: './src/index.js',
        index2: './src/index2.js'
    }
}
</code></pre></div><p>运行webpack</p> <div class="language- extra-class"><pre class="language-text"><code>/***/ &quot;./src/util.js&quot;:
/*!*********************!*\
  !*** ./src/util.js ***!
  \*********************/
/*! exports provided: a */
</code></pre></div><p>分别打开<code>dist</code>目录下<code>index1.js</code>和<code>index2.js</code>可以发现都会有这段代码。说明打包后了两个页面入口的js分别都打入了<code>./src/util.js</code>中导出的<code>a</code>变量</p> <p>在一般情况下，对于工具包都会在主入口文件执行的时候之前就引入。这样就可以充分的利用缓存。当第一个页面加载完成后。第二个页面主要加载业务代码。而这些公用代码则可以利用缓存进行复用。不需要从服务端重新获取。</p> <p>像以上情况，把所工具函数都打入入口文件，会导致文件包的过大。无法利用缓存提高加载性能。所以需要通过<code>optimization.splitChunks</code>选项进行代码分离提取。</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>本节学习课程demo下载文件夹为<a href="https://github.com/494755899/Webpack-learning/tree/master/source" target="_blank" rel="noopener noreferrer">lesson8<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <h3 id="总结："><a href="#总结：" aria-hidden="true" class="header-anchor">#</a> 总结：</h3> <ol><li>创建单个入口可以通过字符串的写法。</li> <li>通过多个入口创建一个入口通过数组的方式。</li> <li>多页面创建，创建多个入口时，可以通过对象的方式，但是注意多入口的打包方式不做优化分离提取公共部分，会造成包的过大和不能利用浏览器缓存机制。</li></ol></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Webpack-learning/concepts/concept.html" class="prev">
          概念
        </a></span> <span class="next"><a href="/Webpack-learning/concepts/configuration.html">
          配置(configuration)
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/Webpack-learning/assets/js/6.72114b79.js" defer></script><script src="/Webpack-learning/assets/js/app.5d786b44.js" defer></script>
  </body>
</html>
