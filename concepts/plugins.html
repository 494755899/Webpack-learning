<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>插件(plugins) | Webpack learning</title>
    <meta name="description" content="webpack学习指南">
    
    
    <link rel="preload" href="/Webpack-learning/assets/css/styles.3fe4ddbe.css" as="style"><link rel="preload" href="/Webpack-learning/assets/js/app.3fe4ddbe.js" as="script"><link rel="preload" href="/Webpack-learning/assets/js/10.00ec698d.js" as="script"><link rel="prefetch" href="/Webpack-learning/assets/js/3.2ea671e8.js"><link rel="prefetch" href="/Webpack-learning/assets/css/1.styles.609f56ce.css"><link rel="prefetch" href="/Webpack-learning/assets/js/1.609f56ce.js"><link rel="prefetch" href="/Webpack-learning/assets/css/2.styles.b5865242.css"><link rel="prefetch" href="/Webpack-learning/assets/js/2.b5865242.js"><link rel="prefetch" href="/Webpack-learning/assets/js/4.bdbe2993.js"><link rel="prefetch" href="/Webpack-learning/assets/js/5.27222b05.js"><link rel="prefetch" href="/Webpack-learning/assets/js/6.141586ef.js"><link rel="prefetch" href="/Webpack-learning/assets/js/7.ac2e4309.js"><link rel="prefetch" href="/Webpack-learning/assets/js/8.797d26b8.js"><link rel="prefetch" href="/Webpack-learning/assets/js/9.e0d05790.js">
    <link rel="stylesheet" href="/Webpack-learning/assets/css/styles.3fe4ddbe.css"><link rel="stylesheet" href="/Webpack-learning/assets/css/1.styles.609f56ce.css"><link rel="stylesheet" href="/Webpack-learning/assets/css/2.styles.b5865242.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Webpack-learning/" class="home-link router-link-active"><!----> <span class="site-name">Webpack learning</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Webpack-learning/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Webpack-learning/concepts/howInstall.html" class="nav-link">concepts(概念)</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Webpack-learning/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Webpack-learning/concepts/howInstall.html" class="nav-link">concepts(概念)</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Webpack-learning/concepts/howInstall.html" class="sidebar-link">安装</a></li><li><a href="/Webpack-learning/concepts/concept.html" class="sidebar-link">概念</a></li><li><a href="/Webpack-learning/concepts/entry.html" class="sidebar-link">入口起点(entry point)</a></li><li><a href="/Webpack-learning/concepts/configuration.html" class="sidebar-link">配置(configuration)</a></li><li><a href="/Webpack-learning/concepts/output.html" class="sidebar-link">输出(output)</a></li><li><a href="/Webpack-learning/concepts/loader.html" class="sidebar-link">解析器(loader)</a></li><li><a href="/Webpack-learning/concepts/plugins.html" class="active sidebar-link">插件(plugins)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Webpack-learning/concepts/plugins.html#插件的基本用法" class="sidebar-link">插件的基本用法</a></li><li class="sidebar-sub-header"><a href="/Webpack-learning/concepts/plugins.html#同一个插件可以new多次" class="sidebar-link">同一个插件可以new多次</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="插件-plugins"><a href="#插件-plugins" aria-hidden="true" class="header-anchor">#</a> 插件(plugins)</h1> <p><code>webpack</code>的插件功能十分强大,插件主要解决<code>loader</code>无法解决的问题。</p> <h2 id="插件的基本用法"><a href="#插件的基本用法" aria-hidden="true" class="header-anchor">#</a> 插件的基本用法</h2> <p>所有的<code>webpack</code>插件都是定义在<code>plugins</code>选项中,在引入插件包之后。只需要在<code>plugins</code>选项中通过<code>new</code>关健词进行使用差件既可</p> <p>举列<code>clean-webpack-plugin</code>:</p> <p>目录结构</p> <div class="language- extra-class"><pre class="language-text"><code>webpackProject
 |--src
 |   |--index.js
 |--webpack.config.js
</code></pre></div><p>webpack.config.js</p> <div class="language- extra-class"><pre class="language-text"><code>module.exports = {
  output: {
    path: __dirname + '/dist',
    filename: 'bundle.[hash].js'
  }
}
</code></pre></div><p>运行<strong>webpack</strong></p> <p>在打包后的结果中<code>dist</code>目录下生成了一个<code>bundle.</code>(跟着<code>hash</code>码).js的文件。</p> <p>如果此时我们改动<code>src/index.js</code>的文件。此时再次会生成一个<code>bundle.</code>(跟着<code>hash</code>码).js的文件。</p> <p>这样会导致我们每次生成文件都需要都动把上次生成的<code>hash</code>文件删除。手动的情况下会导致删错文件等情况。</p> <h3 id="通过clean-webpack-plugin进行删除文件"><a href="#通过clean-webpack-plugin进行删除文件" aria-hidden="true" class="header-anchor">#</a> 通过clean-webpack-plugin进行删除文件</h3> <p>下载<code>npm install clean-webpack-plugin -D</code></p> <p>在<code>plugins</code>数组选项中<code>new</code>一个<code>CleanWebpackPlugin</code>插件。为了能更好的演示出结果。在<code>filename</code>中添加了<code>hash</code>,每次改动入口文件的时候,打包后的文件<code>hash</code>值都会变。正是因为每次这样能更好的展示出<code>clean-webpack-plugin</code>的根本作用。</p> <p>webpack.config.js</p> <div class="language- extra-class"><pre class="language-text"><code>const CleanWebpackPlugin = require('clean-webpack-plugin')
module.exports = {
  output: {
    path: __dirname + '/dist',
    filename: 'bundle.[hash].js'
  },
 +plugins: [
 +  new CleanWebpackPlugin(['dist'])
 +] 
}
</code></pre></div><p>当每次打包之前都会调用<code>new CleanWebpackPlugin(['dist'])</code>,删除<code>dist</code>目录下的文件。这样就可以保证每次在生成文件的时候都会删除上次打包过的文件目录。当重新改变入口文件的内容的时候就不会存在多余残留的文件。</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>本节学习课程demo下载文件夹为<a href="https://github.com/494755899/Webpack-learning/tree/master/source" target="_blank" rel="noopener noreferrer">lesson20<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <h2 id="同一个插件可以new多次"><a href="#同一个插件可以new多次" aria-hidden="true" class="header-anchor">#</a> 同一个插件可以new多次</h2> <p>对于插件而言,是通过实列化构造函数。每个传入的选项都是独立的。所以对于同一个插件可以进行多次实例化使用</p> <p>改变一下webpack.config.js中的文件内容</p> <div class="language- extra-class"><pre class="language-text"><code>const CleanWebpackPlugin = require('clean-webpack-plugin')

module.exports = {
  entry: {
    index1: './src/index1.js',
    index2: './src/index2.js'
  },
  output: {
    path: __dirname + '/dist',
    filename: '[name]/[hash].js'
  },
  plugins: [
    new CleanWebpackPlugin(['dist/index1']),
    new CleanWebpackPlugin(['dist/index2'])
  ]
}
</code></pre></div><p>此时在<code>entry</code>中定义两个入口文件,在<code>output</code>输出结果的总目录放在<code>dist</code>目录下。然后分别把<code>'./src/index1.js'</code>打包后的文件输出结果为<code>dist/index1/index1.js</code>。把<code>'./src/index2.js'</code>打包后的文件输出结果为<code>dist/index2/index2.js</code>中。</p> <p>在插件中分别对删除<code>dist/index1</code>目录和<code>dist/index2</code>目录的文件。如果只删除其中的一个。在改动<code>src</code>中<code>index1</code>和<code>index2</code>文件内容时，会对<code>hash</code>进行一个改动。每次都会残留多余上次打包后的<code>hash</code>文件。</p> <p>其实本质上我们可以直接删除<code>dist</code>目录。但是为了展示可以通过<code>new</code>多个实例插件的表现。做了<code>index1</code>和<code>index2</code>目录的分别删除。由此可知可以<code>new</code>多个实例插件。</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>本节学习课程demo下载文件夹为<a href="https://github.com/494755899/Webpack-learning/tree/master/source" target="_blank" rel="noopener noreferrer">lesson21<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Webpack-learning/concepts/loader.html" class="prev">
          解析器(loader)
        </a></span> <!----></p></div> </div> <!----></div></div>
    <script src="/Webpack-learning/assets/js/10.00ec698d.js" defer></script><script src="/Webpack-learning/assets/js/app.3fe4ddbe.js" defer></script>
  </body>
</html>
